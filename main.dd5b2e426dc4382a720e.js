"use strict";(self.webpackChunkotus_javascript_weather_forecast=self.webpackChunkotus_javascript_weather_forecast||[]).push([[179],{4578:function(t,n,e){var r=e(5861),a=e(7757),c=e.n(a);function o(t){t.innerHTML='\n                <input placeholder="Город" required autofocus></input>\n                <button>Узнать погоду</button>\n            '}var i=e(3218),u=e.n(i),s=e(1469),l=e.n(s),p=e(3144),f=e(5671),h=e(136),d=e(4575),y=e(1120),v=e(2407);var w=function(t){(0,h.Z)(a,t);var n,e,r=(n=a,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,y.Z)(n);if(e){var a=(0,y.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,d.Z)(this,t)});function a(t){var n;return(0,f.Z)(this,a),(n=r.call(this,t)).name="HttpError",n}return(0,p.Z)(a)}((0,v.Z)(Error));function m(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(c().mark((function t(){var n,e,r,a,o,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.ipgeolocation.io/ipgeo?apiKey=".concat("f8577df470f44c429232a2419bf5dc99"),t.next=4,fetch(n);case 4:if((e=t.sent).ok){t.next=7;break}throw new w("Error in fetching user`s geo data!");case 7:return t.next=9,e.json();case 9:return r=t.sent,a=r.city,o=r.latitude,i=r.longitude,t.abrupt("return",{city:a,latitude:o,longitude:i});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=function(t){(0,h.Z)(a,t);var n,e,r=(n=a,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,y.Z)(n);if(e){var a=(0,y.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,d.Z)(this,t)});function a(t){var n;return(0,f.Z)(this,a),(n=r.call(this,t)).name="DataError",n}return(0,p.Z)(a)}((0,v.Z)(Error));function k(t){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(c().mark((function t(n){var e,r,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&u()(n)){t.next=2;break}throw new Z("Error in passed params!");case 2:return r="a3ec23828a024080b68d50315d06d2f9",a={geo:["https://api.weatherbit.io/v2.0/current?lat=".concat(n.latitude),"lon=".concat(n.longitude),"key=".concat(r),"units=".concat("M"),"lang=".concat("ru")].join("&"),city:["https://api.weatherbit.io/v2.0/current?city=".concat(n.city),"key=".concat(r),"units=".concat("M"),"lang=".concat("ru")].join("&")},t.next=8,fetch(a[null!==(e=n.type)&&void 0!==e?e:"city"]);case 8:if((o=t.sent).ok){t.next=11;break}throw new w("Error in fetching weather data!");case 11:return t.abrupt("return",o.json());case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,n){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(c().mark((function t(n,e){var r,a,o,i,s,p,f,h,d,y;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.innerHTML="<span>Погода в городе</span>",t.abrupt("return");case 4:return s=t.sent,t.next=7,k({longitude:s.longitude,latitude:s.latitude,type:"geo"});case 7:p=t.sent,f=p.weather&&l()(p.weather)?p.weather[0]:[],h=p.main&&u()(p.main)?p.main:{},d=p.sys&&u()(p.sys)?p.sys:{},n.classList.add("weather-page"),y="http://openweathermap.org/img/wn/".concat(f.icon,"@2x.png"),n.innerHTML='\n  <header class="app-header">Header</header>\n        <h1>Прогноз погоды</h1>\n        <p class="weather">\n          '.concat(null!==(r=d.country)&&void 0!==r?r:"Error",", ").concat(null!==(a=p.name)&&void 0!==a?a:"Error"," ").concat(null!==(o=Math.floor(h.temp))&&void 0!==o?o:"Error","&deg;C ").concat(null!==(i=f.description)&&void 0!==i?i:"Error",'\n        </p>\n        <img class="weather-icon" src=').concat(y,' alt=":(">\n        <footer class="app-footer">Copyright&copy;</footer>\n    ');case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,n){t.innerHTML="<span>Карта города</span>",console.log(n)}var R=e(2569),M=e.n(R),O=function(){function t(){(0,f.Z)(this,t);var n=JSON.parse(window.localStorage.getItem("history"));this.data=n&&l()(n)?n:[],console.log(this.data)}return(0,p.Z)(t,[{key:"addItem",value:function(t){this.data=this.data.push(t),window.localStorage.setItem("history",JSON.stringify(this.data))}},{key:"deleteItem",value:function(t){this.data=M()(this.data,t),window.localStorage.setItem("history",JSON.stringify(this.data))}},{key:"clearAll",value:function(){this.data=[],window.localStorage.removeItem("history")}}]),t}();function H(){var t=new O;return"<span>".concat(JSON.stringify(t.data),"</span>")}function L(t){t.addEventListener("click",(function(){console.log(t.value)}))}function j(t){return q.apply(this,arguments)}function q(){return(q=(0,r.Z)(c().mark((function t(n){var e,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.innerHTML='\n    <div class=container>\n      <div class="input">input</div>\n      <div class="weather">dispaly</div>\n      <div class="map">map</div>\n      <div class="history">history</div>\n    <div>\n  ',o(e=document.querySelector(".input")),L(e),document.querySelector(".history"),H(),t.next=8,m();case 8:return r=t.sent,t.next=11,k(r);case 11:a=t.sent,b(document.querySelector(".weather"),a),E(document.querySelector(".map"),a);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(0,r.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector("#app"),t.next=3,j(n);case 3:case"end":return t.stop()}}),t)})))()}},function(t){t.O(0,[216,532],(function(){return 4578,t(t.s=4578)})),t.O()}]);